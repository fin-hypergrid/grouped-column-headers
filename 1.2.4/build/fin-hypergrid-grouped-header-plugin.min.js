!function(e){"use strict";var H,u="GroupedHeader",o={paint:function(i,r){var e=this.super.paint,t=r.gridCell.x,n=r.value.split(this.delimiter),o=n.length,d=r.bounds,l=d.y+d.height,h=Object.assign({},d),a=this.visibleColumns.find(function(e){return e.columnIndex===t-1});r.prefillColor=null,d.height/=o;for(var s,c=0,u=d.y,g=this.tree;c<o;c++,u+=d.height,s=g.children){var f=n[c],p=!1;0===c?0===t||1===o||this.groupCount!==o||this.tree.value!==f?(0<t&&this.tree&&this.autosizeGroups&&k(r.grid.behavior,this.tree),g=this.tree={value:f,children:[],left:h.x,width:h.width},a&&!this.columnHeaderLines&&1===o&&(a.top=l)):p=!0:c<o-1&&(g=s[s.length-1])&&g.value===f?p=!0:(g={value:f,children:[],left:h.x,width:h.width},s.push(g)),p&&(g.width+=r.gridLinesVWidth+h.width,a&&(a.top=this.columnHeaderLines||c<o-2?u+d.height:l)),c<o-1&&(r.prefillColor=null)}for(c=0,g=this.tree;c<o;c++,d.y+=d.height,g=g.children[g.children.length-1]){d.x=g.left,d.width=g.width;var m={isColumnHovered:r.isColumnHovered,isSelected:r.isSelected},v=this.groupConfig,b=v&&v.length,C=c<o-1;if(C){r.isColumnHovered=r.isSelected=!1,b&&(v=v[c%b],Object.keys(v).forEach(x,this));var y=r.paintBackground||this.paintBackground;if(y){if("function"!=typeof y&&(y=H[y]),"function"!=typeof y)throw"Expected background paint function or name of registered background paint function.";y.overlay||(r.prefillColor=r.backgroundColor,y.call(this,i,r))}}r.value=g.value,e.call(this,i,r),g.minWidth=r.minWidth,g.columnIndex=t,C&&(y&&y.overlay&&y.call(this,i,r),Object.assign(r,m))}function x(e){m[e]=r[e];var t=v[e];"paintBackground"!==e&&"function"==typeof t&&(t=t.call(this,i,r)),r[e]=t}this.groupCount=o,Object.assign(d,h)},delimiter:"|",paintBackground:t,flatHeight:"250%",nestedHeight:"160%",columnHeaderLines:!0,autosizeGroups:!0,groupConfig:[{halign:"center",thickness:1,gradientStops:function(e,t){this.backgroundColor||t.backgroundColor;return[[0,"white"],[1,this.backgroundColor||t.backgroundColor]]}}]};function d(e){var t,i,r,n,o,d=Object.getPrototypeOf(this).setHeaders,l=this.grid.cellRenderers.get(u),h=l.delimiter,a=this.columns.reduce(function(e,t){return Math.max(t.header.split(h).length,e)},0),s=(t=l,i=this.grid.properties,r=a,n=i.columnHeaderFont.match(g),o=n&&n[1]||.8*i.defaultRowHeight,1===r?f(t.flatHeight,o):f(t.nestedHeight,o)*r),c=this.grid.behavior.subgrids.lookup.header;d.call(this,e),this.grid.setRowHeight(0,s,c)}var g=/\b(\d+(\.\d+)?)px\b/;var r=/^(\d+(\.\d+)?)%$/;function f(e,t){var i=e.match(r);return i?i[1]/100*t:e}function l(){var e=Object.getPrototypeOf(this).isColumnReorderable.call(this),t=this.grid.cellRenderers.get(u).delimiter;return e&&!this.columns.find(function(e){return e.getCellProperty(0,"renderer")===u&&-1!==e.header.indexOf(t)})}function k(e,t){t.children.length&&(t.minWidth=Math.max(t.minWidth,function i(r,e){return e.children.length?e.children.reduce(function(e,t){return e+=t.minWidth=Math.max(t.minWidth,i(r,t))},0):e.minWidth=Math.max(e.minWidth,r.getActiveColumn(e.columnIndex).properties.preferredWidth)}(e,t)),function i(r,e){var t=e.children.reduce(function(e,t){return e+t.minWidth},0),n=(e.minWidth-t)/e.children.length;e.children.forEach(function(e){if(e.minWidth+=n,e.children.length)i(r,e);else{var t=r.getActiveColumn(e.columnIndex);t.properties.preferredWidth=e.minWidth}})}(e,t))}var h=/^rgba|^transparent$/;function t(e,t){var i=t.bounds,r=t.thickness||this.groupCount-this.groupIndex;e.cache.fillStyle=t.gridLinesVColor,e.fillRect(i.x,i.y+i.height-r,i.width,r)}t.overlay=!0,e.exports=H={name:"groupedHeader",install:function(e,t){var i=(t=t||{}).CellRenderer||"SimpleCell";if("string"==typeof i&&(i=e.cellRenderers.get(i).constructor),"function"!=typeof i)throw new e.HypergridError("Expected `options.CellRenderer` to be a constructor or a registered cell redenderer.");var r=i.extend(u,o),n=e.cellRenderers.add(r);e.addEventListener("fin-grid-rendered",function(){n.tree&&(k(e.behavior,n.tree),e.checkColumnAutosizing())}),Object.assign(n,t),delete n.CellRenderer,n.visibleColumns=e.renderer.visibleColumns,e.properties.columnHeaderRenderer=u,e.behavior.setHeaders=d,e.behavior.isColumnReorderable=l,e.behavior.dataModel.groupHeaderDelimiter=n.delimiter},decorateBackgroundWithBottomBorder:t,decorateBackgroundWithLinearGradient:function(e,t){var i,r=t.bounds,n=e.createLinearGradient(r.x,r.y,r.x,r.y+r.height);(t.gradientStops||this.gradientStops).forEach(function(e){i=i||h.test(e),n.addColorStop.apply(n,e)}),i&&e.clearRect(r.x,r.y,r.width,r.height),e.cache.fillStyle=n,e.fillRect(r.x,r.y,r.width,r.height)}}}((fin.Hypergrid.require,fin.$={exports:{}}),(fin.$.exports,fin.Hypergrid)),fin.Hypergrid.modules["fin-hypergrid-grouped-header-plugin"]=fin.$.exports,delete fin.$;